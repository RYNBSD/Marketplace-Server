var i=Object.defineProperty;var a=(r,e)=>{for(var o in e)i(r,o,{get:e[o],enumerable:!0})};import{config as c}from"dotenv";c();var s={NODE:{PORT:process.env.PORT??4e3,ENV:process.env.NODE_ENV},URI:{POSTGRES:process.env.NODE_ENV==="production"?process.env.POSTGRESQL_URI:"postgres://postgres:password@localhost:5432/marketplace",MONGO:process.env.NODE_ENV==="production"?process.env.MONGODB_URI:"mongodb://localhost:27017/marketplace"},COOKIE:{SECRET:process.env.COOKIE_SECRET,PARSER:process.env.COOKIE_PARSER},JWT:{SECRET:process.env.JWT_SECRET},SESSION:{SECRET:process.env.SESSION_SECRET},MAIL:{USER:process.env.MAIL_USER,PASS:process.env.MAIL_PASS}};var E={HTTP:{HEADERS:{CSRF:"X-CSRF-Token",JWT:"X-JWT-Token",ACCESS_TOKEN:"Access-Token",METHOD_OVERRIDE:"X-HTTP-Method-Override",RESPONSE_TIME:"X-Response-Time",NO_COMPRESSION:"No-Compression"}},COOKIE:{AUTHORIZATION:"authorization",SESSION:"session",TOKEN:"token"},GLOBAL:{PUBLIC:"public",UPLOAD:"upload"},UPLOAD:{IMAGE:"image",IMAGES:"images",VIDEOS:"videos"},ERROR:{HANDLERS:["controller","middleware","socket","server","passport"]},DB:{CASCADE:"CASCADE",ID:{PRIMARY_KEY:{ID:"id"},FOREIGN_KEY:{USER:"userId",STORE:"storeId",CATEGORY:"categoryId",PRODUCT:"productId",TAG:"tagId"}},TABLES:{USER:{TABLE:"User",SETTING:"UserSetting"},STORE:{TABLE:"Store",SETTING:"StoreSetting",LINK:"StoreLink",VIEWER:"StoreViewer"},CATEGORY:{TABLE:"Category",VIEWER:"CategoryViewer"},PRODUCT:{TABLE:"Product",INFO:"ProductInfo",IMAGE:"ProductImage",RATING:"ProductRating",SIZE:"ProductSize",COLOR:"ProductColor",VIEWER:"ProductViewer",TAG:"ProductTag"},TAG:"Tag",ORDER:"Order",RESPONSE_TIME:"ResponseTime",SERVER_ERROR:"ServerError"},MODELS:{USER:{MODEL:"user",SETTING:"user-setting"},STORE:{MODEL:"store",SETTING:"store-setting",LINK:"store-link",VIEWER:"store-viewer"},CATEGORY:{MODEL:"category",VIEWER:"category-viewer"},PRODUCT:{MODEL:"product",INFO:"product-info",IMAGE:"product-image",RATING:"product-rating",SIZE:"product-size",COLOR:"product-color",VIEWER:"product-viewer",TAG:"product-tag"},TAG:"tag",ORDER:"order",RESPONSE_TIME:"response-time",SERVER_ERROR:"server-error"}},CACHE:{COLLECTIONS:{RATE_LIMIT:"RateLimit",SESSION:"Session",SOCKET:"Socket"}},REQUEST:{PARAMS:{ID:{USER:"userId",STORE:"storeId",CATEGORY:"categoryId",PRODUCT:"productId",ORDER:"orderId",CUSTOMER:"customerId"}}}};var p={name:"server",version:"1.0.0",description:"",main:"./ts/index.ts",type:"module",scripts:{test:'cls && cross-env NODE_ENV="test" jest',start:'cross-env NODE_ENV="production" node ./build/index.js',dev:'cross-env NODE_ENV="development" concurrently "tsc -w" "nodemon ./js/index.js"',lint:"eslint .","lint:fix":"eslint . --fix","code:check":"yarn lint && tsc",build:"node esbuild.config.js"},engines:{node:"20.10.0"},keywords:[],author:"",license:"ISC",dependencies:{"@ffmpeg-installer/ffmpeg":"^1.1.0","@ffprobe-installer/ffprobe":"^2.1.2","@iamtraction/google-translate":"^2.0.1",bcrypt:"^5.1.1",compression:"^1.7.4","connect-mongo":"^5.1.0","connect-timeout":"^1.9.0",cookie:"^0.6.0","cookie-encrypter":"^1.0.1","cookie-parser":"^1.4.6",cors:"^2.8.5",csrf:"^3.1.0",dotenv:"^16.4.5",errorhandler:"^1.5.1",express:"^4.18.3","express-rate-limit":"^7.2.0","express-session":"1.17.3","express-simple-csrf":"^0.1.7","file-type":"16.5.4","fluent-ffmpeg":"^2.1.2","fuse.js":"^7.0.0",helmet:"^7.1.0",hpp:"^0.2.3","http-status-codes":"^2.3.0",jsonwebtoken:"^9.0.2","method-override":"^3.0.0",mongodb:"^6.5.0",morgan:"^1.10.0",multer:"^1.4.5-lts.1",nodemailer:"^6.9.11",passport:"^0.7.0","passport-http-bearer":"^1.0.1","passport-local":"^1.0.0",pg:"^8.11.3","pg-hstore":"^2.3.4","rate-limit-mongo":"^2.3.2","request-ip":"^3.3.0","response-time":"^2.3.2",sequelize:"6.37.2",sharp:"0.32.6","swagger-jsdoc":"^6.2.8","swagger-ui-express":"^5.0.0","tmp-promise":"^3.0.3",zod:"^3.22.4"},devDependencies:{"@faker-js/faker":"^8.4.1","@total-typescript/ts-reset":"^0.5.1","@types/apicache":"^1.6.6","@types/bcrypt":"^5.0.2","@types/compression":"^1.7.5","@types/connect-timeout":"^0.0.39","@types/cookie":"^0.6.0","@types/cookie-parser":"^1.4.7","@types/cors":"^2.8.17","@types/csrf":"^3.1.0","@types/errorhandler":"^1.5.3","@types/express-rate-limit":"^6.0.0","@types/express-session":"^1.18.0","@types/fluent-ffmpeg":"^2.1.24","@types/helmet":"^4.0.0","@types/hpp":"^0.2.6","@types/http-status-codes":"^1.2.0","@types/jest":"^29.5.12","@types/jsonwebtoken":"^9.0.6","@types/method-override":"^0.0.35","@types/morgan":"^1.9.9","@types/multer":"^1.4.11","@types/node":"^20.11.24","@types/nodemailer":"^6.4.14","@types/passport":"^1.0.16","@types/passport-http-bearer":"^1.0.41","@types/passport-local":"^1.0.38","@types/request-ip":"^0.0.41","@types/response-time":"^2.3.8","@types/sharp":"^0.32.0","@types/supertest":"^6.0.2","@types/swagger-jsdoc":"^6.0.4","@types/swagger-ui-express":"^4.1.6","@types/validator":"^13.11.9","@typescript-eslint/eslint-plugin":"^7.1.1","@typescript-eslint/parser":"^7.1.1",colors:"^1.4.0",concurrently:"^8.2.2","cross-env":"^7.0.3",esbuild:"^0.20.1",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","eslint-plugin-security":"1.7.1","form-data":"^4.0.0",jest:"^29.7.0",nodemon:"^3.1.0",prettier:"^3.2.5",supertest:"^6.3.4","ts-node":"^10.9.2",typescript:"^5.4.3","utility-types":"^3.11.0"}};var m={TIME:{MILLISECONDS:1,SECOND:1e3,MINUTE:1e3*60,HOUR:1e3*60*60,DAY:1e3*60*60*24,WEEK:1e3*60*60*24*7,MONTH:1e3*60*60*24*30,YEAR:1e3*60*60*24*30*12},PACKAGE:{VERSION:p.version.substring(0,1)},LENGTH:{LIMIT:25,COLOR:7,PASSWORD:8,MAX:{IMAGE:255,TAG:20,USER:{USERNAME:50,EMAIL:100,PASSWORD:72},STORE:{NAME:20,LINK:75},CATEGORY:{NAME:30},PRODUCT:{TITLE:50,DESCRIPTION:1e3,MODEL:255,COMMENT:255,COLOR:7,SIZE:10,INFO:50}},MIN:{REQUIRED:1}},NULL:{UUID:"00000000-0000-0000-0000-000000000000"}};var n={};a(n,{EXTENSIONS:()=>T,LOCALE:()=>O,ORDER_STATUS:()=>S,PLATFORMS:()=>R,QUALITY:()=>I,RATING_STARS:()=>d,THEMES:()=>g});var d=["0","0.5","1","1.5","2","2.5","3","3.5","4","4.5","5"],g=["light","dark","cupcake","bumblebee","emerald","corporate","synthwave","retro","cyberpunk","valentine","halloween","garden","forest","aqua","lofi","pastel","fantasy","wireframe","black","luxury","dracula","cmyk","autumn","business","acid","lemonade","night","coffee","winter","dim","nord","sunset"],O=["en","ar"],R=["facebook","instagram","whatsapp"],S=["wait","process","done","canceled"],I=["low","medium","high"],T={IMAGE:["ase","art","bmp","blp","cd5","cit","cpt","cr2","cut","dds","dib","djvu","egt","exif","gif","gpl","grf","icns","ico","iff","jng","jpeg","jpg","jfif","jp2","jps","lbm","max","miff","mng","msp","nitf","ota","pbm","pc1","pc2","pc3","pcf","pcx","pdn","pgm","PI1","PI2","PI3","pict","pct","pnm","pns","ppm","psb","psd","pdd","psp","px","pxm","pxr","qfx","raw","rle","sct","sgi","rgb","int","bw","tga","tiff","tif","vtf","xbm","xcf","xpm","3dv","amf","ai","awg","cgm","cdr","cmx","dxf","e2d","egt","eps","fs","gbr","odg","svg","stl","vrml","x3d","sxd","v2d","vnd","wmf","emf","art","xar","png","webp","jxr","hdp","wdp","cur","ecw","iff","lbm","liff","nrrd","pam","pcx","pgf","sgi","rgb","rgba","bw","int","inta","sid","ras","sun","tga"],VIDEO:["3g2","3gp","aaf","asf","avchd","avi","drc","flv","m2v","m3u8","m4p","m4v","mkv","mng","mov","mp2","mp4","mpe","mpeg","mpg","mpv","mxf","nsv","ogg","ogv","qt","rm","rmvb","roq","svi","vob","webm","wmv","yuv"],AUDIO:["wav","bwf","raw","aiff","flac","m4a","pac","tta","wv","ast","aac","mp2","mp3","mp4","amr","s3m","3gp","act","au","dct","dss","gsm","m4p","mmf","mpc","ogg","oga","opus","ra","sln","vox"]};import{Sequelize as t}from"sequelize";var M={async connect(){global.sequelize instanceof t||(global.sequelize=new t(s.URI.POSTGRES,{dialect:"postgres",benchmark:!IS_PRODUCTION,define:{freezeTableName:!0},logging:(r,e)=>{if(IS_PRODUCTION)return!1}}),await global.sequelize.authenticate())},async close(){await global.sequelize?.close(),delete global.sequelize},async init(){global.sequelize instanceof t&&await global.sequelize.sync(IS_PRODUCTION?{}:{force:!IS_PRODUCTION})}};export{a,s as b,E as c,m as d,S as e,T as f,n as g,M as h};
